(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d07d750"],{"0473":function(e,t,a){"use strict";a("7605")},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[],r=(a("a9e3"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll}}}),o=r,l=(a("0473"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"fbdb47ac",null);t["a"]=c.exports},7605:function(e,t,a){},"7db0":function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").find,r=a("44d2"),o=a("ae40"),l="find",c=!0,s=o(l);l in[]&&Array(1)[l]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(l)},"8fc6":function(e,t,a){},ab43:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-button",{attrs:{type:"primary"},on:{click:e.AddClick}},[e._v("新增")]),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.rolesList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),a("el-table-column",{attrs:{align:"header-center",label:"平台"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("platform")(t.row.platform))+" ")]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"公告类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("typeList")(t.row.type))+" ")]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.title)+" ")]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"body padding-l scroll ",domProps:{innerHTML:e._s(t.row.remark)}})]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.DelClick(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialogdetail,title:"新增公告","append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogdetail=t}}},[a("el-form",{attrs:{"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请输入标题"},model:{value:e.addList.name,callback:function(t){e.$set(e.addList,"name",t)},expression:"addList.name"}})],1),a("el-form-item",{attrs:{label:"公告类型"}},[a("el-select",{ref:"optionRef",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.statusoptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"平台"}},[a("el-select",{ref:"optionRef",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:e.selectChange1},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.statusPlatform,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-upload",{staticClass:"imgUpload",attrs:{headers:e.headers,accept:"image/jpg,image/jpeg,image/png",action:e.uploadUrl,name:"file","show-file-list":!1,"on-success":e.handleSuccess,multiple:""}}),a("quill-editor",{ref:"quillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1),a("el-row",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{margin:"20px 0 0px 20px"},attrs:{type:"primary",loading:e.btnLoading},on:{click:e.ClickNewPad}},[e._v("确定")])],1)],1),a("pagination",e._g({directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.page,limit:e.limit},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.limit=t},pagination:e.refresh}},e.$listeners))],1)},i=[],r=a("c7eb"),o=a("1da1"),l=(a("7db0"),a("b0c0"),a("d3b7"),a("333d")),c=a("b775"),s=function(){var e=Object(o["a"])(Object(r["a"])().mark((function e(t){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/api/notice/list",t);case 2:if(a=e.sent,a.code||200===a.code){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o["a"])(Object(r["a"])().mark((function e(t){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].post("/api/notice/create",t);case 2:if(a=e.sent,a.code||200===a.code){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o["a"])(Object(r["a"])().mark((function e(t){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/api/notice/delete/"+t);case 2:if(a=e.sent,a.code||200===a.code){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=a("121a"),f=[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["image","link"]],g={components:{Pagination:l["a"]},filters:{typeList:function(e){return 1==e?"系统公告 ":2==e?"活动 ":"更新"},platform:function(e){return 1==e?"PC":2==e?"安卓":3==e?"H5":"全部"}},data:function(){return{total:1,page:1,limit:10,rolesList:[],targetSelectArr:[],dialogdetail:!1,addList:{},statusoptions:[{name:"公告",id:"1"},{name:"活动",id:"2"},{name:"更新",id:"3"},{name:"咨询",id:"4"},{name:"攻略",id:"5"},{name:"教程",id:"6"}],statusPlatform:[{name:"全部平台",id:"0"},{name:"PC",id:"1"},{name:"安卓",id:"2"},{name:"H5",id:"3"},{name:"官网",id:"4"}],value:"",value1:"",content:"",editorOption:{theme:"snow",modules:{toolbar:{container:f,handlers:{image:function(e){e?document.querySelector(".imgUpload input").click():this.quill.format("image",!1)}}}}},uploadUrl:"https://ysyos.com/admin/api/file/upload",btnLoading:!1}},created:function(){this.Getnotice()},computed:{headers:function(){return{Authorization:"Bearer ".concat(Object(p["b"])().token)}}},methods:{handleSelectionChange:function(e){this.targetSelectArr=e},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.limit=e.limit,this.page=e.page,this.Getnotice(),console.log("refresh:",e)},Getnotice:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s({page:e.page,pageSize:e.limit});case 2:a=t.sent,e.rolesList=a.data.records,e.total=a.data.total,console.log(a);case 6:case"end":return t.stop()}}),t)})))()},selectChange:function(){var e=this,t=this.statusoptions.find((function(t){return t.name===e.value}));this.addList.type=t.id},selectChange1:function(){var e=this,t=this.statusPlatform.find((function(t){return t.name===e.value1}));this.addList.platform=t.id},AddClick:function(){this.addList={},this.value="",this.content="",this.dialogdetail=!0},ClickNewPad:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnLoading=!0,t.next=3,u({remark:e.content,title:e.addList.name,type:e.addList.type,platform:e.addList.platform});case 3:a=t.sent,e.$message(a.message),e.dialogdetail=!1,e.Getnotice(),e.addList={},e.value="",e.value1="",e.content="",e.btnLoading=!1;case 12:case"end":return t.stop()}}),t)})))()},onEditorChange:function(e){e.quill;var t=e.html;e.text;this.content=t},handleSuccess:function(e){var t=this.$refs.quillEditor.quill;if(200===e.code){var a=t.getSelection().index;t.insertEmbed(a,"image",e.data),t.setSelection(a+1)}else this.$message.error("图片插入失败")},DelClick:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("此操作将永久删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.btnLoading=!0,a.next=3,d(e.id);case 3:n=a.sent,200===n.code&&(t.$message(n.message),t.btnLoading=!1,t.Getnotice());case 5:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return a.stop()}}),a)})))()}}},m=g,h=(a("cafa"),a("2877")),b=Object(h["a"])(m,n,i,!1,null,"69f5efc4",null);t["default"]=b.exports},cafa:function(e,t,a){"use strict";a("8fc6")}}]);