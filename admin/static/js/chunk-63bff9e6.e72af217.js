(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63bff9e6"],{"0473":function(e,t,a){"use strict";a("7605")},2276:function(e,t,a){"use strict";a("4738")},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[],l=(a("a9e3"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll}}}),r=l,s=(a("0473"),a("2877")),c=Object(s["a"])(r,n,i,!1,null,"fbdb47ac",null);t["a"]=c.exports},4738:function(e,t,a){},7605:function(e,t,a){},7732:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{staticClass:"text-center cent",attrs:{span:6}},[e._v(" 商品类型："),a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"商品类型"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),a("el-col",{staticClass:"text-center",attrs:{span:6}},[e._v(" 商品名称："),a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"商品名称"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),a("el-col",{staticClass:"text-center",attrs:{span:12}},[a("el-button",{attrs:{type:"primary"}},[e._v(" 搜索 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(" 新增 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleStatus("1")}}},[e._v(" 启用 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleStatus("2")}}},[e._v(" 禁用 ")]),a("el-button",{attrs:{type:"primary",disabled:e.Details},on:{click:e.handleDetails}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDel}},[e._v(" 删除 ")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.rolesList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),a("el-table-column",{attrs:{align:"center",label:"商品信息",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 商品名称："+e._s(t.row.name)),a("br"),e._v(" 商品类型："+e._s(t.row.level)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品价格",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 商品原价："+e._s(t.row.price)),a("br"),e._v(" 商品展示价："+e._s(t.row.activityPrice)+" ")]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"商品参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 实例系统："+e._s(t.row.instanceLevel)),a("br"),e._v(" 在线时长："+e._s(t.row.useDay)+" ")]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"商品详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 商品描述："+e._s(t.row.remark)+" ")]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("isEnable")(t.row.isEnable))+" ")]}}])}),a("el-table-column",{attrs:{align:"header-center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.remark)+" ")]}}])})],1),a("el-dialog",{attrs:{visible:e.dialogVisible,title:e.dialogTableitle,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"商品名称"},model:{value:e.addList.name,callback:function(t){e.$set(e.addList,"name",t)},expression:"addList.name"}})],1),a("el-form-item",{attrs:{label:"商品类型"}},[a("el-select",{ref:"optionRef",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.leveloptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"实例级别"}},[a("el-select",{ref:"optionRef",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:e.selectChange1},model:{value:e.instanceLevel,callback:function(t){e.instanceLevel=t},expression:"instanceLevel"}},e._l(e.leveloptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"商品展示价格"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"商品展示价格"},model:{value:e.addList.activityPrice,callback:function(t){e.$set(e.addList,"activityPrice",t)},expression:"addList.activityPrice"}}),e._v("/元 ")],1),a("el-form-item",{attrs:{label:"商品原价格"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"商品原价格"},model:{value:e.addList.price,callback:function(t){e.$set(e.addList,"price",t)},expression:"addList.price"}}),e._v("/元 ")],1),a("el-form-item",{attrs:{label:"在线时长"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"在线时长"},model:{value:e.addList.useDay,callback:function(t){e.$set(e.addList,"useDay",t)},expression:"addList.useDay"}}),e._v("/天 ")],1),a("el-form-item",{attrs:{prop:"image",label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.qiniuURL,"show-file-list":!1,"http-request":e.imgUploadLicense,accept:".png,.jpg,.gif"}},[e.addList.url?a("img",{staticStyle:{"max-height":"200px"},attrs:{src:e.addList.url}}):a("i",{staticClass:"el-icon-plus"})])],1),a("el-form-item",{attrs:{label:"商品描述"}},[a("el-input",{attrs:{clearable:"",placeholder:"商品描述",autosize:{minRows:2,maxRows:4},type:"textarea"},model:{value:e.addList.remark,callback:function(t){e.$set(e.addList,"remark",t)},expression:"addList.remark"}})],1),a("el-button",{staticStyle:{margin:"20px 0 0px 20px"},attrs:{loading:e.btnLoading,type:"primary"},on:{click:e.AddGoods}},[e._v(" 确认 ")]),a("el-button",{staticStyle:{margin:"20px 0 0px 20px"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取消 ")])],1)],1),a("pagination",e._g({directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.page,limit:e.limit},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.limit=t},pagination:e.refresh}},e.$listeners))],1)},i=[],l=a("c7eb"),r=a("1da1"),s=(a("7db0"),a("d81d"),a("b0c0"),a("d3b7"),a("333d")),c=a("1446"),o={components:{Pagination:s["a"]},filters:{isEnable:function(e){return!0===e?"启用":"禁用"}},data:function(){return{total:1,page:1,limit:10,filename:"",rolesList:[],dialogVisible:!1,addList:{},targetSelectArr:[],leveloptions:[],value:"",instanceLevel:"",Details:!0,dialogTableitle:"新增套餐",table:"add",qiniuURL:"",btnLoading:!1}},created:function(){this.levelList(),this.creadGoods()},methods:{handleSelectionChange:function(e){if(this.targetSelectArr=e,1===e.length)return this.Details=!1;this.Details=!0},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.limit=e.limit,this.page=e.page,this.creadGoods(),console.log("refresh:",e)},creadGoods:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,n,i,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["m"])({page:e.page,pageSize:e.limit,level:e.level});case 2:for(a=t.sent,n=a.data.records,i=0;i<n.length;i++)for(r=0;r<e.leveloptions.length;r++)n[i].level===e.leveloptions[r].id&&(n[i].level=e.leveloptions[r].name),n[i].instanceLevel===e.leveloptions[r].id&&(n[i].instanceLevel=e.leveloptions[r].name);e.rolesList=n,e.total=a.data.total,e.$forceUpdate(),console.log(a);case 9:case"end":return t.stop()}}),t)})))()},levelList:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["q"])();case 2:a=t.sent,e.leveloptions=a.data;case 4:case"end":return t.stop()}}),t)})))()},handleDownload:function(){},selectChange:function(){var e=this,t=this.leveloptions.find((function(t){return t.name===e.value}));this.addList.level=t.id},selectChange1:function(){var e=this,t=this.leveloptions.find((function(t){return t.name===e.instanceLevel}));this.addList.instanceLevel=t.id},AddGoods:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("edit"!==e.table){t.next=2;break}return t.abrupt("return",e.editGoods());case 2:return e.btnLoading=!0,t.next=5,Object(c["a"])({activityPrice:e.addList.activityPrice,level:e.addList.level,name:e.addList.name,price:e.addList.price,remark:e.addList.remark,useDay:e.addList.useDay,instanceLevel:e.addList.instanceLevel,url:e.addList.url});case 5:a=t.sent,e.btnLoading=!1,e.$message(a.message),e.dialogVisible=!1,e.creadGoods();case 10:case"end":return t.stop()}}),t)})))()},editGoods:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,n,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnLoading=!0,a=e.leveloptions.find((function(t){return t.name===e.instanceLevel})),n=e.leveloptions.find((function(t){return t.name===e.value})),t.next=5,Object(c["C"])({activityPrice:e.addList.activityPrice,level:n.id,name:e.addList.name,price:e.addList.price,remark:e.addList.remark,useDay:e.addList.useDay,instanceLevel:a.id,id:e.targetSelectArr[0].id,url:e.addList.url});case 5:i=t.sent,e.$message(i.message),e.dialogVisible=!1,e.btnLoading=!1,e.creadGoods(),console.log("11111");case 11:case"end":return t.stop()}}),t)})))()},handleAdd:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.leveloptions),e.dialogVisible=!0,e.dialogTableitle="新增套餐",e.table="add",e.addList={},e.value="",e.instanceLevel="";case 7:case"end":return t.stop()}}),t)})))()},handleDel:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.targetSelectArr),a=e.targetSelectArr.map((function(e){return e.id})),t.next=4,Object(c["e"])(a);case 4:n=t.sent,e.$message(n.message),e.creadGoods();case 7:case"end":return t.stop()}}),t)})))()},handleDetails:function(){if(this.targetSelectArr.length>1)return this.$message({message:"编辑只能勾选一条数据哦",showClose:!0});this.addList=this.targetSelectArr[0],this.value=this.targetSelectArr[0].level,console.log(this.targetSelectArr),this.instanceLevel=this.targetSelectArr[0].instanceLevel,this.dialogTableitle="编辑套餐",this.table="edit",this.dialogVisible=!0,console.log(this.targetSelectArr)},handleStatus:function(e){var t=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var n,i,r;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.targetSelectArr.map((function(e){return e.id})),i=!0,i="1"===e,a.next=5,Object(c["h"])(i,n);case 5:r=a.sent,t.$message(r.message),t.creadGoods();case 8:case"end":return a.stop()}}),a)})))()},imgUploadLicense:function(e){var t=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var n,i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.file.size>2e6||-1==e.file.type.indexOf("image/"))){a.next=4;break}t.$message("请上传小于2Mb的图片"),a.next=10;break;case 4:return n=new FormData,n.append("file",e.file),a.next=8,Object(c["F"])(n);case 8:i=a.sent,t.addList.url=i.data;case 10:case"end":return a.stop()}}),a)})))()}}},d=o,u=(a("2276"),a("2877")),p=Object(u["a"])(d,n,i,!1,null,"5dacf798",null);t["default"]=p.exports},"7db0":function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").find,l=a("44d2"),r=a("ae40"),s="find",c=!0,o=r(s);s in[]&&Array(1)[s]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!o},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),l(s)}}]);